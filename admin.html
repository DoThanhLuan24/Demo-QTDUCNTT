<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin - Qu·∫£n l√Ω L·ªõp Ti·∫øng Anh</title>
        <link rel="stylesheet" href="./admin/admin.css" />
    </head>
    <body>
        <header class="header">
            <div class="header__content">
                <div class="header__logo">üõ°Ô∏è Admin - Qu·∫£n l√Ω Ti·∫øng Anh</div>
                <div style="display: flex; align-items: center; gap: 1rem">
                    <span id="userName">ƒêang t·∫£i...</span>
                    <button class="btn-logout" onclick="logout()">
                        ƒêƒÉng xu·∫•t
                    </button>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Th·ªëng k√™ -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-card__number" id="totalCourses">0</div>
                    <div class="stat-card__label">T·ªïng s·ªë l·ªõp</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number" id="totalStudents">0</div>
                    <div class="stat-card__label">T·ªïng sinh vi√™n</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number" id="totalEnrollments">0</div>
                    <div class="stat-card__label">T·ªïng ƒëƒÉng k√Ω</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number" id="totalPending">0</div>
                    <div class="stat-card__label">Ch·ªù duy·ªát</div>
                </div>
            </div>

            <!-- Form Th√™m L·ªõp h·ªçc -->
            <div class="section">
                <h2 class="section__title">Th√™m l·ªõp h·ªçc</h2>
                <form class="form" id="courseForm">
                    <div class="form__group">
                        <label class="form__label">T√™n l·ªõp</label>
                        <input
                            class="form__input"
                            type="text"
                            id="courseName"
                            placeholder="VD: Ti·∫øng Anh C∆° B·∫£n"
                            required
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">M√£ l·ªõp</label>
                        <input
                            class="form__input"
                            type="text"
                            id="courseCode"
                            placeholder="VD: ENG_101"
                            required
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">Lo·∫°i l·ªõp</label>
                        <select class="form__select" id="courseType" required>
                            <option value="remedial">TƒÉng C∆∞·ªùng</option>
                            <option value="official">Ch√≠nh Th·ª©c</option>
                        </select>
                    </div>
                    <div class="form__group">
                        <label class="form__label">Gi·∫£ng vi√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="courseInstructor"
                            placeholder="VD: Ms. Johnson"
                            required
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">Sƒ© s·ªë t·ªëi ƒëa</label>
                        <input
                            class="form__input"
                            type="number"
                            id="courseMaxStudents"
                            min="10"
                            placeholder="30"
                            required
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">&nbsp;</label>
                        <button class="btn btn--success" type="submit">
                            ‚ûï Th√™m l·ªõp
                        </button>
                    </div>
                </form>
            </div>

            <!-- Danh s√°ch L·ªõp h·ªçc -->
            <div class="section">
                <h2 class="section__title">Danh s√°ch l·ªõp h·ªçc</h2>
                <table class="table">
                    <thead class="table__head">
                        <tr>
                            <th>M√£ l·ªõp</th>
                            <th>T√™n l·ªõp</th>
                            <th>Lo·∫°i</th>
                            <th>Gi·∫£ng vi√™n</th>
                            <th>Sƒ© s·ªë</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                        <tr>
                            <td
                                colspan="7"
                                style="text-align: center; color: #999"
                            >
                                ƒêang t·∫£i d·ªØ li·ªáu...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Modal Qu·∫£n l√Ω Sinh vi√™n trong L·ªõp -->
            <div id="manageStudentsModal" class="modal">
                <div class="modal__content" style="max-width: 1000px">
                    <div class="modal__header">
                        <h2 id="manageCourseTitle">Qu·∫£n l√Ω sinh vi√™n</h2>
                        <button
                            class="modal__close"
                            onclick="closeManageStudentsModal()"
                        >
                            √ó
                        </button>
                    </div>
                    <div class="modal__body">
                        <!-- N√∫t th√™m sinh vi√™n -->
                        <div
                            style="
                                margin-bottom: 20px;
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                            "
                        >
                            <button
                                class="btn btn--success"
                                onclick="openAddStudentToCourse()"
                            >
                                ‚ûï Th√™m sinh vi√™n v√†o l·ªõp
                            </button>
                            <div
                                id="courseCapacityInfo"
                                style="color: #6b7280; font-size: 14px"
                            >
                                <!-- S·∫Ω hi·ªÉn th·ªã th√¥ng tin s·ª©c ch·ª©a -->
                            </div>
                        </div>

                        <!-- B·∫£ng danh s√°ch sinh vi√™n -->
                        <table class="table">
                            <thead class="table__head">
                                <tr>
                                    <th style="width: 50px">STT</th>
                                    <th>M√£ SV</th>
                                    <th>H·ªç t√™n</th>
                                    <th>Email</th>
                                    <th>ƒêi·ªÉm THPT</th>
                                    <th>Ng√†y ƒëƒÉng k√Ω</th>
                                    <th style="width: 100px">Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="manageStudentsBody">
                                <tr>
                                    <td
                                        colspan="7"
                                        style="text-align: center; color: #999"
                                    >
                                        ƒêang t·∫£i...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal__footer">
                        <button
                            class="btn btn--secondary"
                            onclick="closeManageStudentsModal()"
                        >
                            ƒê√≥ng
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal Th√™m Sinh vi√™n v√†o L·ªõp -->
            <div id="addStudentToCourseModal" class="modal">
                <div class="modal__content" style="max-width: 700px">
                    <div class="modal__header">
                        <h2 id="addStudentModalTitle">
                            Th√™m sinh vi√™n v√†o l·ªõp
                        </h2>
                        <button
                            class="modal__close"
                            onclick="closeAddStudentToCourseModal()"
                        >
                            √ó
                        </button>
                    </div>
                    <div class="modal__body">
                        <!-- T√¨m ki·∫øm sinh vi√™n -->
                        <div class="form-group">
                            <label class="form-label">
                                üîç T√¨m ki·∫øm sinh vi√™n
                            </label>
                            <input
                                type="text"
                                id="searchStudentInput"
                                class="form-input"
                                placeholder="Nh·∫≠p m√£ sinh vi√™n ho·∫∑c t√™n..."
                                oninput="searchAvailableStudents()"
                            />
                        </div>

                        <!-- Danh s√°ch sinh vi√™n c√≥ th·ªÉ th√™m -->
                        <div style="margin-top: 20px">
                            <h3
                                style="
                                    font-size: 16px;
                                    margin-bottom: 12px;
                                    color: #374151;
                                "
                            >
                                Danh s√°ch sinh vi√™n c√≥ th·ªÉ th√™m:
                            </h3>
                            <div
                                id="availableStudentsList"
                                style="max-height: 400px; overflow-y: auto"
                            >
                                <!-- Danh s√°ch sinh vi√™n s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
                            </div>
                        </div>
                    </div>
                    <div class="modal__footer">
                        <button
                            class="btn btn--secondary"
                            onclick="closeAddStudentToCourseModal()"
                        >
                            ƒê√≥ng
                        </button>
                    </div>
                </div>
            </div>

            <!-- Form Th√™m Sinh vi√™n -->
            <div class="section">
                <h2 class="section__title">Th√™m sinh vi√™n</h2>
                <form class="form" id="studentForm">
                    <div class="form__group">
                        <label class="form__label">H·ªç v√† t√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="studentName"
                            placeholder="VD: Nguy·ªÖn VƒÉn A"
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">T√™n ƒëƒÉng nh·∫≠p</label>
                        <input
                            class="form__input"
                            type="text"
                            id="userAccount"
                            placeholder="VD: tendangnhap"
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">Email</label>
                        <input
                            class="form__input"
                            type="text"
                            id="studentEmail"
                            placeholder="VD: student@email.com"
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">ƒêi·ªÉm THPT</label>
                        <input
                            class="form__input"
                            type="text"
                            id="studentScore"
                            placeholder="VD: 7.5"
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">M·∫≠t kh·∫©u</label>
                        <input
                            class="form__input"
                            type="password"
                            id="studentPassword"
                            placeholder="M·∫≠t kh·∫©u ƒëƒÉng nh·∫≠p"
                        />
                    </div>
                    <div class="form__group">
                        <label class="form__label">&nbsp;</label>
                        <button class="btn btn--success" type="submit">
                            ‚ûï Th√™m sinh vi√™n
                        </button>
                    </div>
                </form>
            </div>

            <!-- Danh s√°ch Sinh vi√™n -->
            <div class="section">
                <h2 class="section__title">Danh s√°ch sinh vi√™n</h2>
                <table class="table">
                    <thead class="table__head">
                        <tr>
                            <th>M√£ SV</th>
                            <th>H·ªç t√™n</th>
                            <th>T√™n ƒëƒÉng nh·∫≠p</th>
                            <th>Email</th>
                            <th>ƒêi·ªÉm THPT</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <tr>
                            <td
                                colspan="7"
                                style="text-align: center; color: #999"
                            >
                                ƒêang t·∫£i d·ªØ li·ªáu...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Y√™u c·∫ßu ƒêƒÉng k√Ω Ch·ªù Duy·ªát -->
            <div class="section">
                <h2 class="section__title">Y√™u c·∫ßu ƒëƒÉng k√Ω ch·ªù duy·ªát</h2>
                <table class="table">
                    <thead class="table__head">
                        <tr>
                            <th>STT</th>
                            <th>M√£ SV</th>
                            <th>H·ªç t√™n</th>
                            <th>M√£ l·ªõp</th>
                            <th>T√™n l·ªõp</th>
                            <th>Lo·∫°i l·ªõp</th>
                            <th>Ng√†y g·ª≠i y√™u c·∫ßu</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="pendingRequestsBody">
                        <tr>
                            <td
                                colspan="8"
                                style="text-align: center; color: #999"
                            >
                                ƒêang t·∫£i d·ªØ li·ªáu...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Danh s√°ch ƒêƒÉng k√Ω ƒê√£ Duy·ªát -->
            <div class="section">
                <h2 class="section__title">Danh s√°ch ƒëƒÉng k√Ω ƒë√£ duy·ªát</h2>
                <div
                    style="
                        margin-bottom: 1rem;
                        display: flex;
                        gap: 1rem;
                        flex-wrap: wrap;
                    "
                >
                    <div class="form__group" style="flex: 1; min-width: 200px">
                        <label class="form__label">L·ªçc theo l·ªõp</label>
                        <select
                            class="form__select"
                            id="filterCourse"
                            onchange="renderEnrollments()"
                        >
                            <option value="">-- T·∫•t c·∫£ l·ªõp h·ªçc --</option>
                        </select>
                    </div>
                    <div class="form__group" style="flex: 1; min-width: 200px">
                        <label class="form__label">L·ªçc theo sinh vi√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="filterStudent"
                            placeholder="T√¨m theo t√™n ho·∫∑c m√£ SV"
                            onkeyup="renderEnrollments()"
                        />
                    </div>
                </div>
                <table class="table">
                    <thead class="table__head">
                        <tr>
                            <th>STT</th>
                            <th>M√£ SV</th>
                            <th>H·ªç t√™n</th>
                            <th>M√£ l·ªõp</th>
                            <th>T√™n l·ªõp</th>
                            <th>Lo·∫°i l·ªõp</th>
                            <th>T√™n gi·∫£ng vi√™n</th>
                            <th>Ng√†y ƒëƒÉng k√Ω</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="enrollmentsTableBody">
                        <tr>
                            <td
                                colspan="8"
                                style="text-align: center; color: #999"
                            >
                                ƒêang t·∫£i d·ªØ li·ªáu...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Modal Qu·∫£n l√Ω Sinh vi√™n trong L·ªõp -->
        <div class="modal" id="manageStudentsModal">
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title">
                        Qu·∫£n l√Ω Sinh vi√™n - <span id="modalCourseName"></span>
                    </h3>
                    <button class="modal__close" onclick="closeModal()">
                        &times;
                    </button>
                </div>

                <h4 style="margin-bottom: 1rem">
                    Sinh vi√™n trong l·ªõp (<span id="enrolledCount">0</span>)
                </h4>
                <div class="student-list" id="enrolledStudents">
                    <p style="text-align: center; color: #999">
                        Ch∆∞a c√≥ sinh vi√™n n√†o
                    </p>
                </div>

                <h4 style="margin: 1.5rem 0 1rem">Th√™m sinh vi√™n v√†o l·ªõp</h4>
                <div class="form__group">
                    <label class="form__label">Ch·ªçn sinh vi√™n</label>
                    <select class="form__select" id="studentToAdd">
                        <option value="">-- Ch·ªçn sinh vi√™n --</option>
                    </select>
                </div>
                <button
                    class="btn btn--primary"
                    onclick="addStudentToCourse()"
                    style="width: 100%; margin-top: 1rem"
                >
                    ‚ûï Th√™m v√†o l·ªõp
                </button>
            </div>
        </div>

        <!-- Modal S·ª≠a L·ªõp h·ªçc -->
        <div class="modal" id="editCourseModal">
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title">S·ª≠a th√¥ng tin l·ªõp h·ªçc</h3>
                    <button class="modal__close" onclick="closeEditModal()">
                        &times;
                    </button>
                </div>

                <form id="editCourseForm">
                    <input type="hidden" id="editCourseId" />
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">T√™n l·ªõp</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editCourseName"
                            required
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">M√£ l·ªõp</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editCourseCode"
                            required
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">Lo·∫°i l·ªõp</label>
                        <select
                            class="form__select"
                            id="editCourseType"
                            required
                        >
                            <option value="remedial">TƒÉng C∆∞·ªùng</option>
                            <option value="official">Ch√≠nh Th·ª©c</option>
                        </select>
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">Gi·∫£ng vi√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editCourseInstructor"
                            required
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">Sƒ© s·ªë t·ªëi ƒëa</label>
                        <input
                            class="form__input"
                            type="number"
                            id="editCourseMaxStudents"
                            min="10"
                            required
                        />
                    </div>
                    <button
                        class="btn btn--success"
                        type="submit"
                        style="width: 100%"
                    >
                        üíæ L∆∞u thay ƒë·ªïi
                    </button>
                </form>
            </div>
        </div>

        <!-- Modal S·ª≠a Sinh vi√™n -->
        <div class="modal" id="editStudentModal">
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title">S·ª≠a th√¥ng tin sinh vi√™n</h3>
                    <button
                        class="modal__close"
                        onclick="closeEditStudentModal()"
                    >
                        &times;
                    </button>
                </div>

                <form id="editStudentForm">
                    <input type="hidden" id="editStudentOriginalId" />
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">M√£ sinh vi√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editStudentId"
                            placeholder="Nh·∫≠p m√£ sinh vi√™n"
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">H·ªç v√† t√™n</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editStudentName"
                            placeholder="Nh·∫≠p h·ªç v√† t√™n"
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">Email</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editStudentEmail"
                            placeholder="Nh·∫≠p email"
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label">ƒêi·ªÉm THPT</label>
                        <input
                            class="form__input"
                            type="text"
                            id="editStudentScore"
                            placeholder="Nh·∫≠p ƒëi·ªÉm THPT"
                        />
                    </div>
                    <div class="form__group" style="margin-bottom: 1rem">
                        <label class="form__label"
                            >M·∫≠t kh·∫©u m·ªõi (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi)</label
                        >
                        <input
                            class="form__input"
                            type="password"
                            id="editStudentPassword"
                            placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi ho·∫∑c ƒë·ªÉ tr·ªëng"
                        />
                    </div>
                    <button
                        class="btn btn--success"
                        type="submit"
                        style="width: 100%"
                    >
                        üíæ L∆∞u thay ƒë·ªïi
                    </button>
                </form>
            </div>
        </div>

        <script src="./admin/admin.js"></script>
    </body>
</html>
